# –ü–æ–ª—É—á–µ–Ω–∏–µ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ü–æ—Ä—Ç—Ñ–µ–ª–µ

–ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è **—á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö** –æ –ø–æ—Ä—Ç—Ñ–µ–ª–µ –∏–∑ TraderNet API –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –±–∏—Ä–∂–µ

## –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install requests pandas openpyxl
```

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å API Credentials

```bash
# –ü–æ–ª—É—á–∏—Ç—å API Key –∏ Secret –∏–∑ https://tradernet.global/settings ‚Üí API

export TRADERNET_API_KEY="tr_–≤–∞—à_api_key"
export TRADERNET_API_SECRET="–≤–∞—à_secret"
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç

```bash
# –ü—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ä—Ç—Ñ–µ–ª–µ
python3 get_portfolio.py

# –ò–ª–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
python3 get_portfolio.py --json

# –ò–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ CSV —Ñ–∞–π–ª
python3 get_portfolio.py --csv my_portfolio.csv
```

---

## –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è (–∫—Ä–∞—Å–∏–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)

```bash
python3 get_portfolio.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
====================================================================================================
üìä –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–û–†–¢–§–ï–õ–ï
====================================================================================================
–î–∞—Ç–∞/–í—Ä–µ–º—è:     2024-10-29 12:30:45
–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: $341,891.00
–°–æ–≤–æ–∫—É–ø–Ω–∞—è –ø—Ä–∏–±—ã–ª—å: $115,427.07 (+105.67%)
–ü–æ–∑–∏—Ü–∏–π:        31
====================================================================================================

–ü–û–ó–ò–¶–ò–ò:
----------------------------------------------------------------------------------------------------
–¢–∏–∫–µ—Ä         –ö–æ–ª-–≤–æ      –¶–µ–Ω–∞      –°—Ç–æ–∏–º–æ—Å—Ç—å     –î–æ–ª—è      –í—Ö–æ–¥    –ü—Ä–∏–±—ã–ª—å        %
----------------------------------------------------------------------------------------------------
NVDA.US            575 $207.00     $119,025 34.86%  $96.96  +$63,275  +113.50%
PLTR.US            166 $191.26      $31,749  9.30%  $62.40  +$21,390  +206.49%
NBIS.US            170 $123.84      $21,053  6.17%  $40.59  +$14,152  +205.09%
AMD.US              37 $262.13       $9,699  2.84% $157.44   +$3,873   +66.49%
...

====================================================================================================
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–ª—É—á–∏—Ç—å –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

```bash
python3 get_portfolio.py --json > portfolio.json
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç (portfolio.json):**
```json
{
  "timestamp": "2024-10-29T12:30:45.123456",
  "summary": {
    "total_value": 341891.00,
    "total_profit": 115427.07,
    "total_profit_pct": 105.67,
    "positions_count": 31
  },
  "positions": [
    {
      "ticker": "NVDA.US",
      "quantity": 575,
      "entry_price": 96.96,
      "current_price": 207.00,
      "entry_value": 55749.34,
      "current_value": 119025.00,
      "allocation_pct": 34.86,
      "profit": 63275.66,
      "profit_pct": 113.50
    },
    ...
  ]
}
```

### –ü—Ä–∏–º–µ—Ä 3: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ CSV

```bash
python3 get_portfolio.py --csv my_portfolio.csv
```

–§–∞–π–ª `my_portfolio.csv`:
```
ticker,quantity,entry_price,current_price,entry_value,current_value,profit,profit_pct,allocation_pct
NVDA.US,575,96.96,207.00,55749.34,119025.00,63275.66,113.50,34.86
PLTR.US,166,62.40,191.26,10358.95,31749.16,21390.21,206.49,9.30
...
```

---

## –û–ø—Ü–∏–∏ –ö–æ–º–∞–Ω–¥–Ω–æ–π –°—Ç—Ä–æ–∫–∏

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-------|---------|--------|
| (–Ω–µ—Ç) | –í—ã–≤–µ—Å—Ç–∏ –∫—Ä–∞—Å–∏–≤—ã–π —Ñ–æ—Ä–º–∞—Ç | `python3 get_portfolio.py` |
| `--json` | –í—ã–≤–µ—Å—Ç–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ | `python3 get_portfolio.py --json` |
| `--csv FILE` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ CSV —Ñ–∞–π–ª | `python3 get_portfolio.py --csv portfolio.csv` |

---

## –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –†–∞–∑–Ω—ã—Ö –ó–∞–¥–∞—á

### üí° –î–Ω–µ–≤–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞ –ü–æ—Ä—Ç—Ñ–µ–ª—è

```bash
# –ü—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä—é —Å—Ç–∞—Ç—É—Å –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
python3 get_portfolio.py
```

### üìä –ê–Ω–∞–ª–∏–∑ –ü–æ—Ä—Ç—Ñ–µ–ª—è –≤ Python

```bash
# –ü–æ–ª—É—á–∞—é JSON –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤ Python —Å–∫—Ä–∏–ø—Ç–µ
python3 get_portfolio.py --json | python3 analyze.py
```

### üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ò—Å—Ç–æ—Ä–∏–∏ –ü–æ—Ä—Ç—Ñ–µ–ª—è

```bash
# –°–æ—Ö—Ä–∞–Ω—è—é –ø–æ—Ä—Ç—Ñ–µ–ª—å —Å –¥–∞—Ç–æ–π
python3 get_portfolio.py --csv portfolio_$(date +%Y%m%d).csv

# –†–µ–∑—É–ª—å—Ç–∞—Ç: portfolio_20241029.csv, portfolio_20241030.csv, ...
```

### üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –¢–∞–±–ª–∏—Ü–µ

```bash
# –°–æ—Ö—Ä–∞–Ω—è—é –≤ CSV –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤ Excel –∏–ª–∏ Google Sheets
python3 get_portfolio.py --csv my_portfolio.csv

# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä—ã–≤–∞—é –≤ Excel –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –î—Ä—É–≥–∏–º–∏ –°–∫—Ä–∏–ø—Ç–∞–º–∏

### –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å –≤ Python —Å–∫—Ä–∏–ø—Ç–µ

```python
from tradernet_integration import TraderNetClient, PortfolioAnalyzer, load_credentials_from_env

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
api_key, api_secret = load_credentials_from_env()
client = TraderNetClient(api_key, api_secret)

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å
analyzer = PortfolioAnalyzer(client)
df, stats = analyzer.analyze_current_portfolio()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
print(f"–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${stats['total_value']:,.2f}")
print(f"–ü—Ä–∏–±—ã–ª—å: ${stats['total_profit']:,.2f}")

# –†–∞–±–æ—Ç–∞—Ç—å —Å DataFrame
for idx, row in df.head(5).iterrows():
    print(f"{row['ticker']}: {row['quantity']} @ ${row['current_price']}")
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ò—Å—Ç–æ—Ä–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
mkdir -p portfolio_history

# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab –¥–ª—è –¥–Ω–µ–≤–Ω–æ–≥–æ —Å–Ω–∏–º–∫–∞ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 4 PM)
0 16 * * 1-5 python3 /path/to/get_portfolio.py --csv /path/to/portfolio_history/portfolio_$(date +\%Y\%m\%d).csv

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –Ω–æ–≤—ã–π —Ñ–∞–π–ª portfolio_20241029.csv, portfolio_20241030.csv, ...
```

---

## –ß—Ç–æ –î–µ–ª–∞–µ—Ç –°–∫—Ä–∏–ø—Ç

‚úÖ **–î–µ–ª–∞–µ—Ç:**
- –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ä—Ç—Ñ–µ–ª—å –∏–∑ API
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- –í—ã—á–∏—Å–ª—è–µ—Ç –ø—Ä–∏–±—ã–ª—å –∏ —É–±—ã—Ç–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º
- –í—ã–≤–æ–¥–∏—Ç –∫—Ä–∞—Å–∏–≤—ã–π –æ—Ç—á–µ—Ç

‚ùå **–ù–ï –¥–µ–ª–∞–µ—Ç:**
- –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ä–¥–µ—Ä—ã
- –ù–µ –ø—Ä–æ–¥–∞–µ—Ç/–ø–æ–∫—É–ø–∞–µ—Ç –∞–∫—Ü–∏–∏
- –ù–µ –¥–µ–ª–∞–µ—Ç –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –±–∏—Ä–∂–µ
- –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—å

---

## Troubleshooting

### –û—à–∏–±–∫–∞: "API Key not found"

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
echo $TRADERNET_API_KEY
echo $TRADERNET_API_SECRET

# –ï—Å–ª–∏ –ø—É—Å—Ç–æ - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö
export TRADERNET_API_KEY="tr_..."
export TRADERNET_API_SECRET="..."
```

### –û—à–∏–±–∫–∞: "No module named 'pandas'"

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pandas
pip install pandas
```

### –û—à–∏–±–∫–∞: "Connection refused"

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
ping tradernet.global

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ TraderNet –¥–æ—Å—Ç—É–ø–µ–Ω
curl https://api.tradernet.global/health
```

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (Schedule)

### –ö–∞–∂–¥—ã–π –î–µ–Ω—å –≤ 4 PM (cron)

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É
0 16 * * 1-5 python3 /Users/dmitry.lazarenko/Documents/projects/stocks-ai/agents/get_portfolio.py --csv /tmp/portfolio.csv && echo "‚úì Portfolio updated at $(date)" >> ~/portfolio_updates.log
```

### Python Scheduler

```python
import schedule
import time
import subprocess

def get_portfolio():
    subprocess.run(["python3", "get_portfolio.py"])

# –ó–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 4 PM
schedule.every().day.at("16:00").do(get_portfolio)

while True:
    schedule.run_pending()
    time.sleep(60)
```

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –î—Ä—É–≥–∏–º–∏ –°–∫—Ä–∏–ø—Ç–∞–º–∏

| –°–∫—Ä–∏–ø—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –§—É–Ω–∫—Ü–∏—è |
|--------|-----------|---------|
| **get_portfolio.py** | –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è | ‚úÖ –¢–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ |
| **execute_portfolio_recommendations.py** | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è | ‚ö†Ô∏è –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–Ω–∏—Ç–µ —Å `get_portfolio.py` —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç API, –ø–æ—Ç–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ `execute_portfolio_recommendations.py` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏.

---

## –ß–∞—Å—Ç—ã–µ –í–æ–ø—Ä–æ—Å—ã

### Q: –°–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Å –º–æ–∏–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º?
A: **–ù–ï–¢.** –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ç–æ–ª—å–∫–æ **—á–∏—Ç–∞–µ—Ç** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –û–Ω –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ä–¥–µ—Ä—ã –∏–ª–∏ –º–µ–Ω—è—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å.

### Q: –ö–∞–∫ —á–∞—Å—Ç–æ —è –º–æ–≥—É –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç?
A: –°—Ç–æ–ª—å–∫–æ —Ä–∞–∑ —Å–∫–æ–ª—å–∫–æ –∑–∞—Ö–æ—Ç–∏—Ç–µ! –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –ú–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è?
A: **–î–ê!** –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- –î–Ω–µ–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –ê–Ω–∞–ª–∏–∑–∞ –≤ Excel
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### Q: –ß—Ç–æ –µ—Å–ª–∏ —è —Ö–æ—á—É –¥–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–∑–∂–µ?
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `execute_portfolio_recommendations.py` –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã. –ù–∞—á–Ω–∏—Ç–µ —Å `--dry-run` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

---

## –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python3 get_portfolio.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å –≤ CSV –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
3. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ schedule –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
4. ‚è≥ –ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `execute_portfolio_recommendations.py`

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 29 –æ–∫—Ç—è–±—Ä—è 2024
**–í–µ—Ä—Å–∏—è:** 1.0.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û
