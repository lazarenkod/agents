---
name: generate-compliance-report
description: Генерация детальных отчетов о соответствии требованиям ФСТЭК с возможностью выбора формата и уровня детализации
---

# Генерация отчетов о соответствии ФСТЭК

Команда для создания детальных отчетов о соответствии системы контейнеризации требованиям ФСТЭК России в различных форматах.

## Назначение

Автоматическая генерация профессиональной документации на основе результатов анализа безопасности для предоставления регуляторам, аудиторам и руководству.

## Типы отчетов

### 1. Аудиторское заключение
Официальный документ для сертификации и регуляторных проверок.

**Содержание:**
- Общие сведения об аудите
- Методология и scope
- Детальные результаты по категориям требований
- Матрица соответствия
- Выявленные несоответствия с доказательствами
- Оценка рисков
- Рекомендации и план мероприятий
- Заключение о готовности к сертификации

**Формат:** Markdown, PDF (через экспорт)

### 2. Технический отчет
Детальный технический анализ для специалистов по безопасности.

**Содержание:**
- Результаты сканирования образов
- Анализ конфигураций
- Проверка RBAC и политик
- Результаты тестирования
- Технические рекомендации с примерами кода

**Формат:** Markdown с кодом YAML/JSON

### 3. Матрица соответствия
Табличное представление статуса выполнения всех требований.

**Содержание:**
- Полный список требований ФСТЭК для выбранного УЗ
- Статус соответствия (✅/⚠️/❌/➖)
- Комментарии и ссылки на доказательства
- Процент соответствия по категориям

**Формат:** Markdown Table, CSV, Excel-compatible

### 4. Отчет об оценке рисков
Анализ рисков информационной безопасности.

**Содержание:**
- Идентифицированные активы
- Выявленные уязвимости и угрозы
- Матрица рисков
- Приоритизация
- План обработки рисков

**Формат:** Markdown

### 5. План мероприятий
Roadmap по устранению несоответствий.

**Содержание:**
- Список мероприятий с приоритетами
- Сроки и ответственные
- Оценка трудозатрат
- Календарный план
- Критерии выполнения

**Формат:** Markdown, Gantt chart compatible

### 6. Executive Summary
Краткая сводка для руководства.

**Содержание:**
- Ключевые показатели (dashboard view)
- Топ-3 критичных проблем
- Общая готовность к сертификации
- Рекомендуемые приоритетные действия
- Визуализация прогресса

**Формат:** Markdown с визуальными элементами

## Использование

### Базовая генерация

```bash
/generate-compliance-report
```

Интерактивно запрашивает:
1. Путь к результатам анализа
2. Типы отчетов для генерации
3. Уровень детализации
4. Директорию для сохранения

### Генерация конкретного типа отчета

```bash
# Аудиторское заключение
/generate-compliance-report --type audit --input ./analysis-results --output ./reports

# Технический отчет
/generate-compliance-report --type technical --input ./analysis-results

# Матрица соответствия
/generate-compliance-report --type matrix --input ./analysis-results

# Отчет о рисках
/generate-compliance-report --type risk --input ./analysis-results

# Executive summary
/generate-compliance-report --type executive --input ./analysis-results

# План мероприятий
/generate-compliance-report --type remediation --input ./analysis-results
```

### Генерация всех отчетов

```bash
/generate-compliance-report --type all --input ./analysis-results --output ./complete-reports
```

### Дополнительные параметры

```bash
/generate-compliance-report \
  --type audit \
  --input ./analysis-results \
  --output ./reports \
  --level uz-2 \
  --detail full \
  --language ru \
  --include-evidence true \
  --auditor "Иванов И.И." \
  --date 2025-11-20
```

**Доступные параметры:**

- `--type` : Тип отчета (audit|technical|matrix|risk|remediation|executive|all)
- `--input` : Путь к результатам анализа
- `--output` : Директория для сохранения отчетов (по умолчанию: ./fstec-reports)
- `--level` : Уровень защищенности (УЗ-1|УЗ-2|УЗ-3|УЗ-4)
- `--detail` : Уровень детализации (brief|standard|full)
- `--language` : Язык отчета (ru - только русский поддерживается)
- `--include-evidence` : Включать доказательства (screenshots, конфигурации)
- `--auditor` : ФИО аудитора
- `--organization` : Название организации
- `--system-name` : Наименование системы
- `--date` : Дата отчета (по умолчанию: текущая)
- `--template` : Путь к пользовательскому шаблону
- `--format` : Выходной формат (markdown|pdf - требует pandoc)

## Примеры использования

### Пример 1: Подготовка к сертификационному аудиту

```bash
# Генерация полного пакета документов
/generate-compliance-report \
  --type all \
  --input ./k8s-analysis-2025-11-20 \
  --output ./certification-package \
  --level uz-3 \
  --detail full \
  --auditor "Петров П.П., ведущий аудитор" \
  --organization "ООО Безопасные Системы" \
  --system-name "Production Kubernetes Cluster" \
  --include-evidence true
```

**Результат:**
```
certification-package/
├── audit-conclusion-2025-11-20.md           # Официальное заключение
├── technical-analysis-2025-11-20.md         # Технический отчет
├── compliance-matrix-2025-11-20.md          # Матрица соответствия
├── risk-assessment-2025-11-20.md            # Оценка рисков
├── remediation-plan-2025-11-20.md           # План мероприятий
├── executive-summary-2025-11-20.md          # Сводка для руководства
└── evidence/                                 # Доказательства
    ├── configurations/
    ├── scan-results/
    └── screenshots/
```

### Пример 2: Быстрая сводка для руководства

```bash
/generate-compliance-report \
  --type executive \
  --input ./analysis-results \
  --detail brief
```

### Пример 3: Детальный технический отчет для DevOps

```bash
/generate-compliance-report \
  --type technical \
  --input ./k8s-analysis-2025-11-20 \
  --detail full \
  --include-evidence true
```

### Пример 4: Матрица соответствия в CSV

```bash
/generate-compliance-report \
  --type matrix \
  --input ./analysis-results \
  --format csv \
  --output ./reports/compliance-matrix.csv
```

## Структура выходных файлов

### Аудиторское заключение

```markdown
# АУДИТОРСКОЕ ЗАКЛЮЧЕНИЕ
## О соответствии средства контейнеризации требованиям ФСТЭК России

### ОБЩИЕ СВЕДЕНИЯ
[metadata, scope, методология]

### РЕЗУЛЬТАТЫ АУДИТА
[общая статистика, распределение по критичности]

### ДЕТАЛЬНЫЕ РЕЗУЛЬТАТЫ ПО КАТЕГОРИЯМ
[ИА, УД, РУ, АВ, ОВ, КЦ, ЗМ, ЗТС, ЗИС]

### МАТРИЦА СООТВЕТСТВИЯ
[полная таблица всех требований]

### ОЦЕНКА РИСКОВ
[матрица рисков]

### РЕКОМЕНДАЦИИ
[приоритизированный список]

### ПЛАН МЕРОПРИЯТИЙ
[календарный план]

### ЗАКЛЮЧЕНИЕ
[вывод о готовности к сертификации]

### ПРИЛОЖЕНИЯ
[ссылки на доказательства]
```

### Технический отчет

```markdown
# Технический отчет анализа безопасности контейнеров

## 1. Исходные данные
[версии, компоненты, scope]

## 2. Результаты сканирования образов
[таблицы с уязвимостями, CVE]

## 3. Анализ конфигураций
### 3.1. SecurityContext
[примеры текущих конфигураций]

### 3.2. RBAC
[анализ ролей и привилегий]

### 3.3. Network Policies
[статус сетевой изоляции]

## 4. Соответствие требованиям ФСТЭК
[детальный разбор по категориям с техническими деталями]

## 5. Обнаруженные проблемы
[технические детали проблем]

## 6. Рекомендуемые конфигурации
[примеры YAML с комментариями]

## 7. Скрипты автоматизации
[bash/python скрипты для проверок]
```

### Executive Summary

```markdown
# Сводка: Анализ соответствия требованиям ФСТЭК

╔═══════════════════════════════════════════════════════════════╗
║       КЛЮЧЕВЫЕ ПОКАЗАТЕЛИ                                     ║
╚═══════════════════════════════════════════════════════════════╝

Система: Production Kubernetes Cluster
Уровень защищенности: УЗ-3
Дата анализа: 2025-11-20

┌───────────────────────────────────────────────────────────────┐
│ ОБЩЕЕ СООТВЕТСТВИЕ                                            │
├───────────────────────────────────────────────────────────────┤
│ ██████████████░░░░░░░░░░░░  52%                              │
│                                                               │
│ ✅ Соответствует:          45 из 87 требований (52%)         │
│ ⚠️  Частично соответствует: 28 требований (32%)              │
│ ❌ Не соответствует:       14 требований (16%)               │
└───────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────┐
│ ТОП-3 КРИТИЧНЫХ ПРОБЛЕМ                                       │
├───────────────────────────────────────────────────────────────┤
│ 🔴 1. Отсутствие Network Policies                            │
│    Риск: Отсутствие сетевой изоляции                        │
│    Срок устранения: 2 недели                                 │
│                                                               │
│ 🔴 2. Привилегированные контейнеры                           │
│    Риск: Container escape                                    │
│    Срок устранения: 1 месяц                                  │
│                                                               │
│ 🔴 3. Отсутствие централизованного логирования               │
│    Риск: Невозможность расследования инцидентов              │
│    Срок устранения: 3 недели                                 │
└───────────────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────────────┐
│ ГОТОВНОСТЬ К СЕРТИФИКАЦИИ                                     │
├───────────────────────────────────────────────────────────────┤
│ Статус: ⚠️  ТРЕБУЕТСЯ ДОРАБОТКА                              │
│                                                               │
│ До сертификации необходимо:                                  │
│ • Устранить 3 критичных несоответствия                       │
│ • Устранить 8 высоких несоответствий                         │
│                                                               │
│ Ориентировочный срок: 2-3 месяца                             │
│ Ориентировочный бюджет: 150-200 человеко-дней                │
└───────────────────────────────────────────────────────────────┘

## РЕКОМЕНДУЕМЫЕ ДЕЙСТВИЯ

1. **Немедленно (1-2 недели):**
   - Внедрить Network Policies
   - Запретить привилегированные контейнеры

2. **Краткосрочно (1-2 месяца):**
   - Настроить централизованное логирование
   - Внедрить сканирование образов
   - Настроить RBAC по принципу наименьших привилегий

3. **Среднесрочно (2-3 месяца):**
   - Внедрить runtime security monitoring
   - Настроить шифрование данных
   - Провести обучение команды

📄 Полные отчеты: ./fstec-reports/
```

## Кастомизация шаблонов

Можно использовать собственные шаблоны отчетов:

### Создание кастомного шаблона

```markdown
<!-- custom-audit-template.md -->
# {{report_title}}

Организация: {{organization}}
Система: {{system_name}}
Дата: {{date}}

## Результаты

{{#categories}}
### {{category_name}}

{{#requirements}}
- {{requirement_id}}: {{status}} - {{comment}}
{{/requirements}}

{{/categories}}

## Подпись
Аудитор: {{auditor}}
```

### Использование кастомного шаблона

```bash
/generate-compliance-report \
  --type audit \
  --template ./custom-audit-template.md \
  --input ./analysis-results
```

## Экспорт в PDF

Для экспорта в PDF требуется установленный `pandoc`:

```bash
# Генерация с автоматическим экспортом в PDF
/generate-compliance-report \
  --type audit \
  --format pdf \
  --input ./analysis-results
```

Или вручную:

```bash
# Сначала генерируем Markdown
/generate-compliance-report --type audit --input ./analysis-results

# Затем конвертируем в PDF
pandoc audit-conclusion-2025-11-20.md -o audit-conclusion-2025-11-20.pdf \
  --pdf-engine=xelatex \
  -V mainfont="DejaVu Sans" \
  -V geometry:margin=2cm
```

## Валидация отчетов

Команда автоматически валидирует сгенерированные отчеты:

- ✅ Наличие всех обязательных разделов
- ✅ Корректность формата таблиц
- ✅ Наличие подписи и даты
- ✅ Соответствие шаблону
- ✅ Проверка ссылок на доказательства

## Интеграция с другими командами

```bash
# Полный workflow: анализ → генерация отчетов → архивирование
/analyze-container-security --type kubernetes --level УЗ-3 && \
/generate-compliance-report --type all --input ./fstec-reports && \
tar -czf compliance-package-$(date +%Y-%m-%d).tar.gz ./fstec-reports
```

## Устранение проблем

### Проблема: Не найдены результаты анализа

```
Решение: Убедитесь, что путь --input указывает на директорию
с результатами команды /analyze-container-security
```

### Проблема: Ошибка при генерации PDF

```
Решение: Установите pandoc и xelatex:
apt-get install pandoc texlive-xetex texlive-fonts-recommended
```

### Проблема: Отсутствуют шрифты для русского языка

```
Решение: Установите шрифты:
apt-get install fonts-dejavu fonts-liberation
```

## Лучшие практики

1. **Регулярная генерация**: Генерируйте отчеты после каждого существенного изменения
2. **Версионирование**: Храните отчеты с датами в названиях
3. **Архивирование**: Сохраняйте исторические отчеты для отслеживания прогресса
4. **Проверка**: Всегда проверяйте сгенерированные отчеты перед отправкой
5. **Доказательства**: Включайте доказательства для критичных находок

## Дополнительная информация

- Шаблоны отчетов: `skills/fstec-container-requirements/assets/templates/`
- Примеры отчетов: `skills/fstec-container-requirements/assets/examples/`
- Документация по ФСТЭК: https://fstec.ru/
